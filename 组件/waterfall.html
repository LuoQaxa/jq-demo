<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>waterfall</title>
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		li {
			list-style: none;
		}
		/*只需要将图片都变成绝对定位就好了*/
		.waterfall-ct {
			max-width: 1000px;
			margin: 0 auto;
			position: relative;
		}
		.waterfall-ct li{
			position: absolute;
			transition: all 0.5s;
            margin: 10px;
            text-align: center;
            color: #fff;
		}

		li img{
			width: 185px;
		}
	</style>
</head>
<body>
		<ul class="waterfall-ct">
			<li><img src="http://img.hb.aicdn.com/50bce97a4f6df275be7bf6e4315fdb290df56041e1d6-C2RcgT_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/39ada08529ed82842bf5781e0b0f4008d2819f0d22919-teK68s_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/4f99d24ddb574e62438823403bb31488ce45172a7f283-gge7xx_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/39ada08529ed82842bf5781e0b0f4008d2819f0d22919-teK68s_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/50bce97a4f6df275be7bf6e4315fdb290df56041e1d6-C2RcgT_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/bf071b73510f84006c602e87d86c83ab41e8c5406abde-GRfPgA_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/6871c0e2683390737295927194a45af174df75d03a1a4-xWHMa1_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/71db2a69e741785d9637ad106f95c6245ea2176b71535-lKYRyQ_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/cea5de0e61c097616c7088c9c3e03cca215631eb548f7-VgHwt7_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/d1df0e6039238b5a7bb3521f6c42c101ad0774fc1b843-zpKhij_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/71db2a69e741785d9637ad106f95c6245ea2176b71535-lKYRyQ_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/830a842589abc5f85eb3fc10a9844641aabcf6c14e875-irv1MQ_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/50bce97a4f6df275be7bf6e4315fdb290df56041e1d6-C2RcgT_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/bf071b73510f84006c602e87d86c83ab41e8c5406abde-GRfPgA_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/6871c0e2683390737295927194a45af174df75d03a1a4-xWHMa1_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/71db2a69e741785d9637ad106f95c6245ea2176b71535-lKYRyQ_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/cea5de0e61c097616c7088c9c3e03cca215631eb548f7-VgHwt7_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/d1df0e6039238b5a7bb3521f6c42c101ad0774fc1b843-zpKhij_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/71db2a69e741785d9637ad106f95c6245ea2176b71535-lKYRyQ_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/830a842589abc5f85eb3fc10a9844641aabcf6c14e875-irv1MQ_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/50bce97a4f6df275be7bf6e4315fdb290df56041e1d6-C2RcgT_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/bf071b73510f84006c602e87d86c83ab41e8c5406abde-GRfPgA_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/6871c0e2683390737295927194a45af174df75d03a1a4-xWHMa1_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/71db2a69e741785d9637ad106f95c6245ea2176b71535-lKYRyQ_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/cea5de0e61c097616c7088c9c3e03cca215631eb548f7-VgHwt7_fw658" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/d1df0e6039238b5a7bb3521f6c42c101ad0774fc1b843-zpKhij_sq320" alt=""></li>
			<li><img src="http://img.hb.aicdn.com/71db2a69e741785d9637ad106f95c6245ea2176b71535-lKYRyQ_sq320" alt=""></li>
		</ul>
	  <script src="https://code.jquery.com/jquery-3.1.0.js"></script>
	  <script>
	  	var WaterFall = (function(){
	  	    function Waterfall ($ct) {
	  	        this.$ct = $ct;
	  	        this.init();
	  	        this.bind();
	  	        this.render();
	  	    }
	  	    Waterfall.prototype.init = function(){
	  	        //jq 在会返回第一个li的宽度
	  	        this.itemWidth = this.$ct.find('li').outerWidth(true);
	  	        //计算多少列
	  	        this.columns =parseInt(this.$ct.width() / this.itemWidth); 
	  	        this.colHeight = [];
	  	        for (var i = 0; i < this.columns; i++){
	  	            this.colHeight[i] = 0;
	  	        }
	  	    }
	  	    Waterfall.prototype.bind = function(){
	  	        var _this = this;
	  	        $(window).on('resize',function(){
	  	        	_this.init();
	  	            _this.render();
	  	        })
	  	    }
	  	    Waterfall.prototype.render = function(){
	  	        var _this = this;
	  	        this.$ct.find('li').each(function(){
	  	            _this.placeItem($(this));
	  	        })
	  	
	  	    }
	  	    Waterfall.prototype.placeItem = function($node){
	  	        //get min value in colHeight
	  	        var min = this.getMinHeight();
	  	        var minInd = min.ind,
	  	            minHeight = min.value;
	  	        $node.css({
	  	            left:minInd * this.itemWidth,
	  	            top:minHeight
	  	        });
	  	        //update colHeight
	  	        this.colHeight[minInd] = $node.outerHeight(true) + this.colHeight[minInd];
	  	        this.$ct.height(Math.max.apply(null,this.colHeight));
	  	    }
	  	    Waterfall.prototype.getMinHeight = function(){
	  	        var minInd = 0;
	  	        var minHeight = this.colHeight[minInd];
	  	        for (var i = 0; i < this.colHeight.length; i++){
	  	            if (minHeight > this.colHeight[i]) {
	  	                minHeight = this.colHeight[i];
	  	                minInd = i;
	  	            }
	  	        }
	  	        return {ind:minInd,value:minHeight}
	  	    }

	  	    return {
	  	        init:function($ct){
	  	            new Waterfall($ct);
	  	        }
	  	    }
	  	})()

	  	WaterFall.init($('.waterfall-ct'));
	   	</script>
</body>
</html>